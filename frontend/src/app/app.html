<div class="container">
  <h1>Sistema de Notificações em Tempo Real</h1>
  
  <div class="controls">
    <button (click)="testNotification()" class="btn-test">Enviar Notificação de Teste</button>
  </div>

  <div class="toast" [class.show]="showToast()" *ngIf="toastMessage()">
    <div [class]="'toast-content ' + toastMessage()?.type">
      <strong>{{ toastMessage()?.title }}</strong>
      <p>{{ toastMessage()?.message }}</p>
    </div>
  </div>

  <div class="notifications-section">
    <h2>Histórico de Notificações</h2>
    <div class="notifications-list">
      @if (notifications().length === 0) {
        <p class="empty">Nenhuma notificação recebida ainda.</p>
      } @else {
        @for (notif of notifications(); track notif.timestamp) {
          <div class="notification-item" [class]="notif.type">
            <div class="notification-header">
              <span class="notification-type">{{ notif.type }}</span>
              <span class="notification-time">{{ notif.timestamp | date:'HH:mm:ss' }}</span>
            </div>
            <h3>{{ notif.title }}</h3>
            <p>{{ notif.message }}</p>
          </div>
        }
      }
    </div>
  </div>
</div>
